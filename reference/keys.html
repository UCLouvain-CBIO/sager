<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Add and subsetting keys — addKey,SummarizedExperiment-method • sager</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Add and subsetting keys — addKey,SummarizedExperiment-method"><meta property="og:description" content="A key is a variable that is used to identify features within an
object. These features can refer to spectra in a Spectra object,
peptide-spectrum matches in a PSM object, or PSMs, peptides of
proteins in a SummarizedExperiment or QFeatures object. They
do not need to be unique.
The goal of a key is to identify matching features across data
types, such as for example to match de MS spectra to the PSMs and
peptides. These different data types can be stored together in an
MsExperiment object, and matched through one or multiple keys.
There are two general functions to work with keys across objects:
addKey(object, vars, key, force, sep) will add a key named
key to an object based on user-defined variables vars.
filterKey(object, value, key, keep) will subset object
based on a value in key.
getKey(object, key, drop) will return the values of variable
key in object.

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sager</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/sager.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/UCLouvain-CBIO/sager/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add and subsetting keys</h1>
    <small class="dont-index">Source: <a href="https://github.com/UCLouvain-CBIO/sager/blob/main/R/keys.R" class="external-link"><code>R/keys.R</code></a></small>
    <div class="hidden name"><code>keys.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A key is a variable that is used to identify features within an
object. These features can refer to spectra in a <code>Spectra</code> object,
peptide-spectrum matches in a <code>PSM</code> object, or PSMs, peptides of
proteins in a <code>SummarizedExperiment</code> or <code>QFeatures</code> object. They
do not need to be unique.</p>
<p>The goal of a key is to identify matching features across data
types, such as for example to match de MS spectra to the PSMs and
peptides. These different data types can be stored together in an
<code>MsExperiment</code> object, and matched through one or multiple keys.</p>
<p>There are two general functions to work with keys across objects:</p><ul><li><p><code>addKey(object, vars, key, force, sep)</code> will add a key named
<code>key</code> to an object based on user-defined variables <code>vars</code>.</p></li>
<li><p><code>filterKey(object, value, key, keep)</code> will subset <code>object</code>
based on a <code>value</code> in <code>key</code>.</p></li>
<li><p><code>getKey(object, key, drop)</code> will return the values of variable
<code>key</code> in <code>object</code>.</p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'SummarizedExperiment'</span></span>
<span><span class="fu">addKey</span><span class="op">(</span><span class="va">object</span>, vars <span class="op">=</span> <span class="cn">NULL</span>, key <span class="op">=</span> <span class="st">".KEY"</span>, force <span class="op">=</span> <span class="cn">FALSE</span>, sep <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'Spectra'</span></span>
<span><span class="fu">addKey</span><span class="op">(</span><span class="va">object</span>, vars <span class="op">=</span> <span class="cn">NULL</span>, key <span class="op">=</span> <span class="st">".KEY"</span>, force <span class="op">=</span> <span class="cn">FALSE</span>, sep <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'PSM'</span></span>
<span><span class="fu">addKey</span><span class="op">(</span><span class="va">object</span>, vars <span class="op">=</span> <span class="cn">NULL</span>, key <span class="op">=</span> <span class="st">".KEY"</span>, force <span class="op">=</span> <span class="cn">FALSE</span>, sep <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'QFeatures'</span></span>
<span><span class="fu">addKey</span><span class="op">(</span><span class="va">object</span>, vars <span class="op">=</span> <span class="cn">NULL</span>, key <span class="op">=</span> <span class="st">".KEY"</span>, force <span class="op">=</span> <span class="cn">FALSE</span>, sep <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'Spectra'</span></span>
<span><span class="fu">filterKey</span><span class="op">(</span><span class="va">object</span>, <span class="va">value</span>, key <span class="op">=</span> <span class="st">".KEY"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'PSM'</span></span>
<span><span class="fu">filterKey</span><span class="op">(</span><span class="va">object</span>, <span class="va">value</span>, key <span class="op">=</span> <span class="st">".KEY"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'SummarizedExperiment'</span></span>
<span><span class="fu">filterKey</span><span class="op">(</span><span class="va">object</span>, <span class="va">value</span>, key <span class="op">=</span> <span class="st">".KEY"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'QFeatures'</span></span>
<span><span class="fu">filterKey</span><span class="op">(</span><span class="va">object</span>, <span class="va">value</span>, key <span class="op">=</span> <span class="st">".KEY"</span>, keep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsExperiment'</span></span>
<span><span class="fu">filterKey</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">value</span>,</span>
<span>  key <span class="op">=</span> <span class="st">".KEY"</span>,</span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"spectra"</span>, <span class="st">"qdata"</span><span class="op">)</span>,</span>
<span>  otherdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'PSM'</span></span>
<span><span class="fu">getKey</span><span class="op">(</span><span class="va">object</span>, key <span class="op">=</span> <span class="st">".KEY"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'Spectra'</span></span>
<span><span class="fu">getKey</span><span class="op">(</span><span class="va">object</span>, key <span class="op">=</span> <span class="st">".KEY"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'SummarizedExperiment'</span></span>
<span><span class="fu">getKey</span><span class="op">(</span><span class="va">object</span>, key <span class="op">=</span> <span class="st">".KEY"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'QFeatures'</span></span>
<span><span class="fu">getKey</span><span class="op">(</span><span class="va">object</span>, key <span class="op">=</span> <span class="st">".KEY"</span>, drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>An instance of class <code>SummarizedExperiment</code>,
<code>QFeatures</code>, <code>PSM</code> or <code>Spectra</code>.</p></dd>


<dt id="arg-vars">vars<a class="anchor" aria-label="anchor" href="#arg-vars"></a></dt>
<dd><p><code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code> referencing the variables to use to
create the key. These are to be found in the object's
<code>rowData</code> (for <code>SummarizedExperiment</code> and <code>QFeatures</code> objects)
or <code>spectraData</code> (for <code>Spectra</code> objects) or in the object
itself (for <code>PSM</code> objects). Throws an error if the variables
aren't found. Default is <code>NULL</code>.</p></dd>


<dt id="arg-key">key<a class="anchor" aria-label="anchor" href="#arg-key"></a></dt>
<dd><p><code>character(1)</code> defining the key's name. Default is
<code>".KEY"</code>.</p></dd>


<dt id="arg-force">force<a class="anchor" aria-label="anchor" href="#arg-force"></a></dt>
<dd><p><code>logical(1)</code> that defines is an existing key should
be overwritten. Default is <code>FALSE</code> and an error is thrown if
the key is already present.</p></dd>


<dt id="arg-sep">sep<a class="anchor" aria-label="anchor" href="#arg-sep"></a></dt>
<dd><p><code>character(1)</code> specifying the separator when multiple
variables are pasted together to generate the key. Default is
<code>"."</code>.</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p><code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code> containing the value of key of the
feature(s) of interest.</p></dd>


<dt id="arg-keep">keep<a class="anchor" aria-label="anchor" href="#arg-keep"></a></dt>
<dd><p><code>logical(1)</code> that defines whether to keep assays that
didn't contain the key of interest. If <code>TRUE</code>, these are
returned as empty assays (i.e. with zero
rows/features)<code>. Default is </code>FALSE`; only assays containing
matching keys are returned.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p><code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code> defining what data type to subset by
key. Default are <code>"spectra"</code> and <code>"qdata"</code>. Note that these
data are ignored if their slot is NULL.</p></dd>


<dt id="arg-otherdata">otherdata<a class="anchor" aria-label="anchor" href="#arg-otherdata"></a></dt>
<dd><p><code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code> listing the name(s) of the
additional data types in <code>otherData(.)</code> to run <code>filterKey()</code>
on.</p></dd>


<dt id="arg-drop">drop<a class="anchor" aria-label="anchor" href="#arg-drop"></a></dt>
<dd><p><code>logical(1)</code> defining whether to drop assays that
don't have the key variable. Default is <code>TRUE</code>.</p></dd>

</dl></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Laurent Gatto.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

      </footer></div>






  </body></html>

